@{
    ViewData["Title"] = "Index";
}
@{
    ViewBag.Title = "Details";
}
@using irrigation_system_webapp.Models;

    <script src=
"https://code.jquery.com/jquery-3.6.0.min.js">
    </script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<canvas id="line-chart" width="800" height="450"></canvas>

<script>
        var chartElem = document.getElementById("line-chart");
    var myChart = new Chart(chartElem, {
  type: 'line',
  data: {
    labels: ["a","b"],
    datasets: [{ 
        data: [200,100],
        label: "Africa",
        borderColor: "#3e95cd",
        fill: false
      }
    ]
  },
  options: {
    title: {
      display: true,
      text: 'World population per region (in millions)'
    }
  }
});
var arr = [2000];
    @{
        int[]myNum = {10000, 20, 30, 40};
        var temp = (int)ViewBag.temperature;
    }

        function initialAjaxCall() {
        $.ajax({
  
            // Our sample url to make request 
            url: 
            'https://localhost:7213/api/Temperatures',
  
            // Type of Request
            type: "GET",
  
            // Function to call when to
            // request is ok 
            success: function (data) {
                console.log(data[data.length - 1])
                //var x = JSON.stringify(data);
                //console.log(x);
            },
  
            // Error handling 
            error: function (error) {
                console.log(`Error ${error}`);
            }
        });
        }

        setInterval(function(){
            initialAjaxCall() // this will run after every 5 seconds
            num += 100;
            addData(myChart,"label",num);
        }, 1000);

        initialAjaxCall();
var num = 100;

function addData(chart, label, data) {
    chart.data.labels.push(label);
    chart.data.datasets.forEach((dataset) => {
        dataset.data.push(data);
    });
    chart.update();
}


</script>